---
title: 关于 WSL 2
description: 关于 WSL 2 - 适用于 Linux 的 Windows 子系统的新体系结构
keywords: BashOnWindows, bash, wsl, wsl2, Windows, 适用于 Linux 的 Windows 子系统, windowssubsystem, ubuntu, debian, suse, Windows 10, 安装
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.localizationpriority: high
ms.openlocfilehash: 70044105820dd485246ae3fc731cbd6f06183f8a
ms.sourcegitcommit: e6e888f2b88a2d9c105cee46e5ab5b70aa43dd80
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/13/2020
ms.locfileid: "83343879"
---
# <a name="about-wsl-2"></a><span data-ttu-id="183c4-104">关于 WSL 2</span><span class="sxs-lookup"><span data-stu-id="183c4-104">About WSL 2</span></span>

<span data-ttu-id="183c4-105">WSL 2 是体系结构的一个新版本，它支持适用于 Linux 的 Windows 子系统在 Windows 上运行 ELF64 Linux 二进制文件。</span><span class="sxs-lookup"><span data-stu-id="183c4-105">WSL 2 is a new version of the architecture that powers the Windows Subsystem for Linux to run ELF64 Linux binaries on Windows.</span></span> <span data-ttu-id="183c4-106">它的主要目标是提高文件系统性能，以及增加完全的系统调用兼容性。</span><span class="sxs-lookup"><span data-stu-id="183c4-106">Its primary goals are to increase file system performance, as well as adding full system call compatibility.</span></span> <span data-ttu-id="183c4-107">这一新的体系结构改变了这些 Linux 二进制文件与Windows 和计算机硬件进行交互的方式，但仍然提供与 WSL 1（当前广泛可用的版本）中相同的用户体验。</span><span class="sxs-lookup"><span data-stu-id="183c4-107">This new architecture changes how these Linux binaries interact with Windows and your computer’s hardware, but still provides the same user experience as in WSL 1 (the current widely available version).</span></span> <span data-ttu-id="183c4-108">各个 Linux 发行版可以作为 WSL 1 发行版运行，也可以作为 WSL 2 发行版运行，可以随时升级或降级，并且你可以并行运行 WSL 1 和 WSL 2 发行版。</span><span class="sxs-lookup"><span data-stu-id="183c4-108">Individual Linux distros can be run either as a WSL 1 distro, or as a WSL 2 distro, can be upgraded or downgraded at any time, and you can run WSL 1 and WSL 2 distros side by side.</span></span> <span data-ttu-id="183c4-109">WSL 2 使用全新的体系结构，该体系结构使用真实的 Linux 内核。</span><span class="sxs-lookup"><span data-stu-id="183c4-109">WSL 2 uses an entirely new architecture that uses a real Linux kernel.</span></span>

## <a name="linux-kernel-in-wsl-2"></a><span data-ttu-id="183c4-110">WSL 2 中的 Linux 内核</span><span class="sxs-lookup"><span data-stu-id="183c4-110">Linux kernel in WSL 2</span></span>

<span data-ttu-id="183c4-111">WSL 2 中的 Linux 内核是根据最新的稳定版分支（基于 kernel.org 上提供的源代码）在内部构建的。此内核专门针对 WSL 2 进行了优化。</span><span class="sxs-lookup"><span data-stu-id="183c4-111">The Linux kernel in WSL 2 is built in house from the latest stable branch, based on the source available at kernel.org. This kernel has been specially tuned for WSL 2.</span></span> <span data-ttu-id="183c4-112">它针对大小和性能进行了优化，在 Windows 上可提供令人惊艳的 Linux 体验，并将通过 Windows 更新提供维护，这意味着你将获得最新的安全修复和内核改进，无需自己管理它。</span><span class="sxs-lookup"><span data-stu-id="183c4-112">It has been optimized for size and performance to give an amazing Linux experience on Windows and will be serviced through Windows updates, which means you will get the latest security fixes and kernel improvements without needing to manage it yourself.</span></span>

<span data-ttu-id="183c4-113">此外，此内核将是开源的。</span><span class="sxs-lookup"><span data-stu-id="183c4-113">Additionally this kernel will be open source.</span></span> <span data-ttu-id="183c4-114">可以在[此处](https://github.com/microsoft/WSL2-Linux-Kernel)找到此 Linux 内核的完整源代码。</span><span class="sxs-lookup"><span data-stu-id="183c4-114">You can find the full source code for the Linux kernel [here](https://github.com/microsoft/WSL2-Linux-Kernel).</span></span> <span data-ttu-id="183c4-115">如果想了解关于此内核的更多信息，可以查看由构建它的团队撰写的[此博客文章](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/)。</span><span class="sxs-lookup"><span data-stu-id="183c4-115">If you’d like to read more about this kernel you can check out [this blog post](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) written by the team that built it.</span></span>

## <a name="brief-overview-of-the-wsl-2-architecture"></a><span data-ttu-id="183c4-116">WSL 2 体系结构的简要概述</span><span class="sxs-lookup"><span data-stu-id="183c4-116">Brief overview of the WSL 2 architecture</span></span>

<span data-ttu-id="183c4-117">WSL 2 使用最新、最强大的虚拟化技术在轻量级实用程序虚拟机 (VM) 中运行其 Linux 内核。</span><span class="sxs-lookup"><span data-stu-id="183c4-117">WSL 2 uses the latest and greatest in virtualization technology to run its Linux kernel inside of a lightweight utility virtual machine (VM).</span></span> <span data-ttu-id="183c4-118">但是，WSL 2 不会是传统的 VM 体验。</span><span class="sxs-lookup"><span data-stu-id="183c4-118">However, WSL 2 will NOT be a traditional VM experience.</span></span> <span data-ttu-id="183c4-119">传统的 VM 体验可能启动速度慢，是独立的，消耗大量资源，需要你花费时间进行管理。</span><span class="sxs-lookup"><span data-stu-id="183c4-119">A traditional VM experience can be slow to boot up, is isolated, consumes lots of resources, and requires your time to manage it.</span></span> <span data-ttu-id="183c4-120">WSL 2 没有这些属性。</span><span class="sxs-lookup"><span data-stu-id="183c4-120">WSL 2 does not have these attributes.</span></span> <span data-ttu-id="183c4-121">它仍然能提供 WSL 1 的卓越优势：Windows 和 Linux 之间高度集成，启动极快，资源占用较少，最重要的是，不需要你配置或管理虚拟机。</span><span class="sxs-lookup"><span data-stu-id="183c4-121">It will still give the remarkable benefits of WSL 1: High levels of integration between Windows and Linux, extremely fast boot times, small resource footprint, and best of all will require no VM configuration or management.</span></span> <span data-ttu-id="183c4-122">虽然 WSL 2 确实使用 VM，但它将在幕后进行管理和运行，因此你将具有与 WSL 1 相同的用户体验。</span><span class="sxs-lookup"><span data-stu-id="183c4-122">While WSL 2 does use a VM, it will be managed and run behind the scenes leaving you with the same user experience as WSL 1.</span></span>

## <a name="increased-file-io-performance"></a><span data-ttu-id="183c4-123">提升了文件 IO 性能</span><span class="sxs-lookup"><span data-stu-id="183c4-123">Increased file IO performance</span></span>

<span data-ttu-id="183c4-124">文件密集型操作（例如 `git clone`、`npm install`、`apt update`、`apt upgrade`）和其他操作的速度都明显提升。</span><span class="sxs-lookup"><span data-stu-id="183c4-124">File intensive operations like `git clone`, `npm install`, `apt update`, `apt upgrade`, and more will all be noticeably faster.</span></span> <span data-ttu-id="183c4-125">实际的速度提升将取决于你运行的应用程序以及它与文件系统的交互方式。</span><span class="sxs-lookup"><span data-stu-id="183c4-125">The actual speed increase will depend on which app you’re running and how it is interacting with the file system.</span></span> <span data-ttu-id="183c4-126">在解压压缩的 tarball 时，WSL 2 的初始版本的运行速度比 WSL 1 快达 20 倍，在各种项目上使用 `git clone`、`npm install` 和 `cmake` 时，大约快 2-5 倍。</span><span class="sxs-lookup"><span data-stu-id="183c4-126">Initial versions of WSL 2 run up to 20x faster compared to WSL 1 when unpacking a zipped tarball, and around 2-5x faster when using `git clone`, `npm install` and `cmake` on various projects.</span></span>

## <a name="full-system-call-compatibility"></a><span data-ttu-id="183c4-127">完全的系统调用兼容性</span><span class="sxs-lookup"><span data-stu-id="183c4-127">Full System Call Compatibility</span></span>

<span data-ttu-id="183c4-128">Linux 二进制文件使用系统调用来执行许多功能，例如访问文件、请求内存、创建进程，等等。</span><span class="sxs-lookup"><span data-stu-id="183c4-128">Linux binaries use system calls to perform many functions such as accessing files, requesting memory, creating processes, and more.</span></span> <span data-ttu-id="183c4-129">虽然 WSL 1 使用的是由 WSL 团队构建的转换层，但 WSL 2 包括了自己的 Linux 内核，具有完全的系统调用兼容性。</span><span class="sxs-lookup"><span data-stu-id="183c4-129">Whereas WSL 1 used a translation layer that was built by the WSL team, WSL 2 includes its own Linux kernel with full system call compatibility.</span></span> <span data-ttu-id="183c4-130">这将引入一组全新的应用，你可以在 WSL 内部运行它们，例如 Docker 和其他应用。</span><span class="sxs-lookup"><span data-stu-id="183c4-130">This introduces a whole new set of apps that you can run inside of WSL, such as Docker and more.</span></span> <span data-ttu-id="183c4-131">此外，对 Linux 内核的任何更新都可以立即添加到你的计算机，而无需等待 WSL 团队实现更改并使其添加到你的计算机。</span><span class="sxs-lookup"><span data-stu-id="183c4-131">Additionally, any updates to the Linux kernel can be immediately added to your computer, rather than waiting for the WSL team to implement the changes and then have them added.</span></span>
