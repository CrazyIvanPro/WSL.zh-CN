---
title: 有关 WSL 2
description: 有关 WSL 2 于 Linux 的 Windows 子系统的新体系结构
keywords: BashOnWindows，bash、 wsl、 wsl2、 windows、 linux、 windowssubsystem、 ubuntu、 debian、 suse、 windows 10 的 windows 子系统安装
author: mscraigloewen
ms.author: mscraigloewen
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.openlocfilehash: b3b0b1ce0f55fed0b4cf223ccc18a509dcf81788
ms.sourcegitcommit: bb88269eb37405192625fa81ff91162393fb491f
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/12/2019
ms.locfileid: "67038127"
---
<span data-ttu-id="380cc-104">WSL 2 是为在 Windows 上运行 ELF64 Linux 二进制文件的 linux 操作系统的 Windows 子系统提供支持的体系结构的新版本。</span><span class="sxs-lookup"><span data-stu-id="380cc-104">WSL 2 is a new version of the architecture that powers the Windows Subsystem for Linux to run ELF64 Linux binaries on Windows.</span></span> <span data-ttu-id="380cc-105">其主要目标是提高文件系统性能，以及添加完整的系统调用兼容性。</span><span class="sxs-lookup"><span data-stu-id="380cc-105">Its primary goals are to increase file system performance, as well as adding full system call compatibility.</span></span> <span data-ttu-id="380cc-106">此新体系结构更改这些 Linux 二进制文件如何与 Windows 和计算机的硬件进行交互，但仍提供了相同的用户体验，如 WSL 1 （当前广泛可用版本） 中所示。</span><span class="sxs-lookup"><span data-stu-id="380cc-106">This new architecture changes how these Linux binaries interact with Windows and your computer’s hardware, but still provides the same user experience as in WSL 1 (the current widely available version).</span></span> <span data-ttu-id="380cc-107">可以升级或降级在任何时候，单个 Linux 作为 WSL 1 的发行版，或 WSL 2 发行版中，可以运行发行版，您可以运行 WSL 1 和 WSL 2 发行版本并排显示。</span><span class="sxs-lookup"><span data-stu-id="380cc-107">Individual Linux distros can be run either as a WSL 1 distro, or as a WSL 2 distro, can be upgraded or downgraded at any time, and you can run WSL 1 and WSL 2 distros side by side.</span></span> <span data-ttu-id="380cc-108">WSL 2 使用使用真实的 Linux 内核的全新体系结构。</span><span class="sxs-lookup"><span data-stu-id="380cc-108">WSL 2 uses an entirely new architecture that uses a real Linux kernel.</span></span>

## <a name="linux-kernel-in-wsl-2"></a><span data-ttu-id="380cc-109">在 WSL 2 中的 Linux 内核</span><span class="sxs-lookup"><span data-stu-id="380cc-109">Linux kernel in WSL 2</span></span>

<span data-ttu-id="380cc-110">Linux 内核在 WSL 2 构建最新稳定分支，基于 kernel.org 在源中的内部。此类内核专门优化 WSL 2。</span><span class="sxs-lookup"><span data-stu-id="380cc-110">The Linux kernel in WSL 2 is built in house from the latest stable branch, based on the source available at kernel.org. This kernel has been specially tuned for WSL 2.</span></span> <span data-ttu-id="380cc-111">它已针对大小和性能，以便在 Windows 上的令人惊叹的 Linux 体验进行优化，并将接受通过 Windows 更新，这意味着您将获得最新安全修补程序和内核改进而无需自行管理。</span><span class="sxs-lookup"><span data-stu-id="380cc-111">It has been optimized for size and performance to give an amazing Linux experience on Windows and will be serviced through Windows updates, which means you will get the latest security fixes and kernel improvements without needing to manage it yourself.</span></span>

<span data-ttu-id="380cc-112">此外，此类内核将是开放源代码。</span><span class="sxs-lookup"><span data-stu-id="380cc-112">Additionally this kernel will be open source.</span></span> <span data-ttu-id="380cc-113">Linux 内核中可找到完整的源代码[此处](https://thirdpartysource.microsoft.com/download/Windows%20Subsystem%20for%20Linux%20v2/May%202019/WSLv2-Linux-Kernel-master.zip)。</span><span class="sxs-lookup"><span data-stu-id="380cc-113">You can find the full source code for the Linux kernel [here](https://thirdpartysource.microsoft.com/download/Windows%20Subsystem%20for%20Linux%20v2/May%202019/WSLv2-Linux-Kernel-master.zip).</span></span> <span data-ttu-id="380cc-114">如果你想要阅读更多有关您可以签出此内核[这篇博客文章](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/)由构建它的团队编写。</span><span class="sxs-lookup"><span data-stu-id="380cc-114">If you’d like to read more about this kernel you can check out [this blog post](https://devblogs.microsoft.com/commandline/shipping-a-linux-kernel-with-windows/) written by the team that built it.</span></span>

## <a name="brief-overview-of-the-wsl-2-architecture"></a><span data-ttu-id="380cc-115">WSL 2 体系结构的简要概述</span><span class="sxs-lookup"><span data-stu-id="380cc-115">Brief overview of the WSL 2 architecture</span></span>

<span data-ttu-id="380cc-116">WSL 2 使用最新和最大虚拟化技术中运行其轻量级实用工具虚拟机 (VM) 内部的 Linux 内核。</span><span class="sxs-lookup"><span data-stu-id="380cc-116">WSL 2 uses the latest and greatest in virtualization technology to run its Linux kernel inside of a lightweight utility virtual machine (VM).</span></span> <span data-ttu-id="380cc-117">但是，WSL 2 就不是传统的 VM 体验。</span><span class="sxs-lookup"><span data-stu-id="380cc-117">However, WSL 2 will NOT be a traditional VM experience.</span></span> <span data-ttu-id="380cc-118">传统 VM 体验可能启动较慢，是隔离、 会消耗大量资源，需要您的时间来对其进行管理。</span><span class="sxs-lookup"><span data-stu-id="380cc-118">A traditional VM experience can be slow to boot up, is isolated, consumes lots of resources, and requires your time to manage it.</span></span> <span data-ttu-id="380cc-119">WSL 2 不具有这些属性。</span><span class="sxs-lookup"><span data-stu-id="380cc-119">WSL 2 does not have these attributes.</span></span> <span data-ttu-id="380cc-120">它仍具有 WSL 1 的非凡优势：高级别的 Windows 和 Linux、 极快的启动时间、 小型资源占用量和最重要的是之间的集成，需要没有 VM 配置或管理。</span><span class="sxs-lookup"><span data-stu-id="380cc-120">It will still give the remarkable benefits of WSL 1: High levels of integration between Windows and Linux, extremely fast boot times, small resource footprint, and best of all will require no VM configuration or management.</span></span> <span data-ttu-id="380cc-121">虽然 WSL 2 使用 VM，它将管理并且只会留下 WSL 1 相同的用户体验与在后台运行。</span><span class="sxs-lookup"><span data-stu-id="380cc-121">While WSL 2 does use a VM, it will be managed and run behind the scenes leaving you with the same user experience as WSL 1.</span></span>

## <a name="increased-file-io-performance"></a><span data-ttu-id="380cc-122">增加的文件的 IO 性能</span><span class="sxs-lookup"><span data-stu-id="380cc-122">Increased file IO performance</span></span>

<span data-ttu-id="380cc-123">之类的 git 克隆文件密集型操作，npm 安装、 apt 更新、 apt 升级和的详细信息所有将明显更快。</span><span class="sxs-lookup"><span data-stu-id="380cc-123">File intensive operations like git clone, npm install, apt update, apt upgrade, and more will all be noticeably faster.</span></span> <span data-ttu-id="380cc-124">实际速度增加将取决于哪些应用上正在运行且如何与文件系统进行交互。</span><span class="sxs-lookup"><span data-stu-id="380cc-124">The actual speed increase will depend on which app you’re running and how it is interacting with the file system.</span></span> <span data-ttu-id="380cc-125">初始版本 WSL 2 的运行速度更快达 20 个 x 解压缩的压缩的 tarball 和围绕比 WSL 1 2-5 x 的各种项目使用 git 克隆、 npm 安装和 cmake 时更快。</span><span class="sxs-lookup"><span data-stu-id="380cc-125">Initial versions of WSL 2 run up to 20x faster compared to WSL 1 when unpacking a zipped tarball, and around 2-5x faster when using git clone, npm install and cmake on various projects.</span></span>

## <a name="full-system-call-compatibility"></a><span data-ttu-id="380cc-126">完整的系统调用兼容性</span><span class="sxs-lookup"><span data-stu-id="380cc-126">Full System Call Compatibility</span></span>

<span data-ttu-id="380cc-127">Linux 二进制文件使用系统调用来执行许多功能，如访问文件、 请求内存，创建过程，和的详细信息。</span><span class="sxs-lookup"><span data-stu-id="380cc-127">Linux binaries use system calls to perform many functions such as accessing files, requesting memory, creating processes, and more.</span></span> <span data-ttu-id="380cc-128">WSL 1 使用由 WSL 团队生成一个转换层，而 WSL 2 包括完整的系统调用兼容其自己的 Linux 内核。</span><span class="sxs-lookup"><span data-stu-id="380cc-128">Whereas WSL 1 used a translation layer that was built by the WSL team, WSL 2 includes its own Linux kernel with full system call compatibility.</span></span> <span data-ttu-id="380cc-129">这就引入了一整套全新的应用程序可以在 WSL，如 Docker 等内运行。</span><span class="sxs-lookup"><span data-stu-id="380cc-129">This introduces a whole new set of apps that you can run inside of WSL, such as Docker and more.</span></span> <span data-ttu-id="380cc-130">此外，对 Linux 内核的任何更新可能会立即准备好添加到您的计算机，而不是等待 WSL 团队实现所做的更改，然后让这些添加。</span><span class="sxs-lookup"><span data-stu-id="380cc-130">Additionally, any updates to the Linux kernel can be immediately ready to be added to your computer, rather than waiting for the WSL team to implement the changes and then have them added.</span></span>